<!DOCTYPE html>
<html lang="id" class="transition-colors duration-300">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-09387TQNHR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-09387TQNHR");
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Time Machine Investment Simulation" />
    <meta name="keywords" content="investment, simulation, stock, crypto, historical" />
    <meta name="author" content="Fiandev" />

    <title>InvestVision - Time Machine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* HTML: <div class="loader"></div> */
        .loader {
            height: 80px;
            aspect-ratio: 1;
            display: grid;
        }

        .loader:before,
        .loader:after {
            content: "";
            --c: no-repeat linear-gradient(#fff 0 0);
            background: var(--c), var(--c);
            background-size: 25% 50%;
            animation: l4 1.5s infinite linear;
        }

        .loader:after {
            transform: scale(-1);
        }

        @keyframes l4 {

            0%,
            10% {
                background-position: 33.4% 100%, 66.6% 100%;
            }

            40% {
                background-position: 33.4% 0, 100% 100%;
            }

            70% {
                background-position: 0 100%, 66.6% 0;
            }

            100% {
                background-position: 33.4% 100%, 66.6% 100%;
            }
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: "class",
        };
    </script>
</head>

<body class="bg-gray-200 text-slate-900 font-sans transition-colors duration-300 dark:bg-slate-950 dark:text-slate-100">
    <div class="min-h-screen p-4 md:p-8 flex flex-col">
        <div class="max-w-6xl mx-auto w-full flex-grow">
            <header class="mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4">
                <div>
                    <h1 class="text-3xl font-black text-slate-900 italic tracking-tight dark:text-white">
                        Invest<span class="text-purple-600">Vision</span>.
                    </h1>
                    <p class="text-slate-500 font-medium dark:text-slate-400">
                        Time Machine Mode <span
                            class="text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded ml-2 font-bold dark:bg-purple-900/30 dark:text-purple-300">BETA</span>
                    </p>
                </div>

                <div class="flex items-center gap-4">
                    <a href="/"
                        class="text-sm font-bold text-slate-500 hover:text-slate-800 dark:hover:text-white transition-colors mr-2">
                        &larr; Back to Simulator
                    </a>

                    <!-- Tombol Toggle Dark Mode -->
                    <button id="themeToggle"
                        class="p-2.5 rounded-xl bg-white shadow-sm border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all dark:bg-slate-800 dark:border-slate-700 dark:text-yellow-400 dark:hover:bg-slate-700">
                        <i class="ph ph-sun text-xl hidden dark:block"></i>
                        <i class="ph ph-moon text-xl block dark:hidden"></i>
                    </button>

                    <div id="playbackStatus"
                        class="hidden flex items-center bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-xs font-black animate-pulse dark:bg-purple-900/30 dark:text-purple-400">
                        <span class="mr-2">●</span> REPLAYING HISTORY
                    </div>
                </div>
            </header>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
                <!-- Sidebar: Input -->
                <div class="space-y-6">
                    <div
                        class="bg-white p-6 rounded-[32px] shadow-xl shadow-slate-200/50 border border-slate-100 dark:bg-slate-900 dark:border-slate-800 dark:shadow-none">
                        <h2
                            class="text-xs font-black mb-6 text-slate-400 uppercase tracking-widest dark:text-slate-500">
                            Konfigurasi Historis
                        </h2>

                        <div class="space-y-4">
                            <div class="grid grid-cols-1 gap-4">
                                <div>
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase mb-1 dark:text-slate-500">Ticker</label>
                                    <input placeholder="select ticker" type="text" id="assetTicker" list="tickerList"
                                        value="BTC-USD"
                                        class="w-full bg-slate-50 border-0 ring-1 ring-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 outline-none uppercase font-black dark:bg-slate-800 dark:ring-slate-700 dark:text-white" />
                                    <datalist id="tickerList"> </datalist>
                                </div>
                                <div>
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase mb-1 dark:text-slate-500">Currency</label>
                                    <select id="currency"
                                        class="w-full bg-slate-50 border-0 ring-1 ring-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 outline-none font-bold dark:bg-slate-800 dark:ring-slate-700 dark:text-white">
                                        <option value="USD">USD ($)</option>
                                        <option value="IDR" selected>IDR (Rp)</option>
                                        <option value="EUR">EUR (€)</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <label
                                    class="block text-[10px] font-black text-slate-400 uppercase mb-1 dark:text-slate-500">
                                    Tahun Mulai (Start Year)
                                </label>
                                <input type="number" id="startYear" value="2009" min="1980" max="2023"
                                    class="w-full bg-slate-50 border-0 ring-1 ring-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 font-bold dark:bg-slate-800 dark:ring-slate-700 dark:text-white" />
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase mb-1 dark:text-slate-500">Modal
                                        Awal</label>
                                    <input type="text" id="initialCapital" value="0"
                                        class="w-full bg-slate-50 border-0 ring-1 ring-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 font-bold dark:bg-slate-800 dark:ring-slate-700 dark:text-white" />
                                </div>
                                <div>
                                    <label
                                        class="block text-[10px] font-black text-slate-400 uppercase mb-1 dark:text-slate-500">Top-Up</label>
                                    <input type="text" id="topupAmount" value="100000"
                                        class="w-full bg-slate-50 border-0 ring-1 ring-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 font-bold dark:bg-slate-800 dark:ring-slate-700 dark:text-white" />
                                </div>
                            </div>

                            <div>
                                <label
                                    class="block text-[10px] font-black text-slate-400 uppercase mb-1 dark:text-slate-500">Frekuensi</label>
                                <select id="interval"
                                    class="w-full bg-slate-50 border-0 ring-1 ring-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-purple-500 font-bold dark:bg-slate-800 dark:ring-slate-700 dark:text-white">
                                    <option value="365">Harian</option>
                                    <option value="52">Mingguan</option>
                                    <option value="12" selected>Bulanan</option>
                                    <option value="4">Kuartalan</option>
                                    <option value="1">Tahunan</option>
                                </select>
                            </div>

                            <div>
                                <div class="flex justify-between mb-1">
                                    <label
                                        class="text-[10px] font-black text-slate-400 uppercase mb-1 dark:text-slate-500">
                                        Durasi Investasi
                                    </label>
                                    <span class="text-purple-600 font-black dark:text-purple-500" id="durationDisplay">5
                                        Tahun</span>
                                </div>
                                <input type="range" id="duration" min="1" max="30" value="5"
                                    class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-purple-600 dark:bg-slate-700" />
                            </div>

                            <button id="simulateBtn"
                                class="w-full bg-purple-600 hover:bg-purple-700 text-white font-black py-4 rounded-2xl transition-all shadow-lg shadow-purple-100 flex items-center justify-center gap-2 dark:shadow-none">
                                <span id="btnText">Jalankan Time Machine</span>
                            </button>
                        </div>
                    </div>

                    <!-- Asset Info Card -->
                    <div id="assetCard"
                        class="bg-white dark:bg-slate-900 p-6 rounded-[32px] text-slate-900 dark:text-white hidden border border-slate-100 dark:border-slate-800 shadow-xl shadow-slate-200/50 dark:shadow-none">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 id="assetName"
                                    class="font-bold text-xs text-purple-500 dark:text-purple-400 uppercase mb-1">
                                    --
                                </h3>
                                <p id="assetTickerLabel" class="text-3xl font-black tracking-tighter uppercase">
                                    --
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase">
                                    Total Return
                                </p>
                                <p id="assetReturn" class="text-xl font-bold text-purple-500 dark:text-purple-400">
                                    --%
                                </p>
                            </div>
                        </div>
                        <p id="assetDesc" class="text-[10px] text-slate-500 dark:text-slate-400 leading-tight">
                            --
                        </p>
                    </div>
                </div>

                <!-- Main: Stats & Chart -->
                <div class="lg:col-span-2 space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div
                            class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm dark:bg-slate-900 dark:border-slate-800">
                            <p class="text-[10px] text-slate-400 font-black uppercase mb-1 dark:text-slate-500">
                                Total Modal
                            </p>
                            <p id="statInvested" class="text-xl font-black text-slate-800 dark:text-white">
                                0
                            </p>
                        </div>
                        <div
                            class="bg-white p-6 rounded-3xl border border-slate-100 shadow-sm dark:bg-slate-900 dark:border-slate-800">
                            <p class="text-[10px] text-slate-400 font-black uppercase mb-1 dark:text-slate-500">
                                Total Keuntungan
                            </p>
                            <p id="statProfit" class="text-xl font-black text-purple-600 dark:text-purple-500">
                                0
                            </p>
                        </div>
                        <div id="statTotalContainer"
                            class="bg-white p-6 rounded-3xl border-transparent border-2 shadow-lg dark:bg-slate-900/50 dark:shadow-none">
                            <p id="statTotalLabel" class="text-[10px] text-purple-400 font-black uppercase mb-1">
                                Nilai Akhir
                            </p>
                            <p id="statTotal" class="text-xl font-black">0</p>
                        </div>
                    </div>

                    <div
                        class="bg-white p-6 md:p-10 rounded-[40px] shadow-xl border border-slate-100 dark:bg-slate-900 dark:border-slate-800 dark:shadow-none">
                        <div class="mb-8">
                            <h2 class="text-xl font-black text-slate-800 uppercase tracking-tight dark:text-white">
                                Performa Historis
                            </h2>
                            <p class="text-sm text-slate-500 dark:text-slate-400">
                                Simulasi berdasarkan data harga penutupan (Close Price) sebenarnya.
                            </p>
                        </div>
                        <div class="h-[400px]">
                            <div id="chart-placeholder"
                                class="w-full h-full flex items-center justify-center text-slate-400">
                                Setup your Time Machine to see history...
                            </div>

                            <canvas id="growthChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer Section -->
            <footer class="mt-8 pt-8 pb-8 border-t border-slate-200 dark:border-slate-800">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                    <div class="text-sm font-medium text-slate-500 dark:text-slate-400 text-center md:text-left">
                        &copy; 2025
                        <span class="text-slate-900 dark:text-white font-black italic tracking-tight">Invest<span
                                class="text-purple-600">Vision</span></span>
                        <span class="mx-2 hidden md:inline">|</span>
                        <span class="block md:inline mt-1 md:mt-0">Time Machine Mode</span>
                    </div>

                    <a href="https://github.com/fiandev/invest-vision" target="_blank" rel="noopener noreferrer"
                        class="flex items-center gap-3 px-5 py-2.5 rounded-2xl bg-slate-900 text-white hover:bg-purple-600 dark:bg-white dark:text-slate-900 dark:hover:bg-purple-400 transition-all duration-300 group shadow-lg shadow-slate-200 dark:shadow-none">
                        <span
                            class="text-sm font-black lowercase tracking-wider">github.com/fiandev/invest-vision</span>
                        <i class="ph-bold ph-github-logo text-lg"></i>
                    </a>
                </div>
            </footer>
        </div>
    </div>

    <!-- Overlay Loading -->
    <div id="loader"
        class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div class="p-10 rounded-[40px] shadow-2xl text-center dark:bg-slate-800 bg-slate-800">
            <div class="loader mx-auto my-4"></div>
            <p class="font-black text-slate-800 text-sm uppercase text-white">
                Menjelajah Waktu ...
            </p>
        </div>
    </div>

    <script>
        let chartInstance = null;
        let animationInterval = null;
        let isAnimating = false;
        let currentSimulationData = null;

        const BACKEND_URL = window.location.origin;

        const el = {
            duration: document.getElementById("duration"),
            durationDisplay: document.getElementById("durationDisplay"),
            startYear: document.getElementById("startYear"),
            simulateBtn: document.getElementById("simulateBtn"),
            btnText: document.getElementById("btnText"),
            currency: document.getElementById("currency"),
            loader: document.getElementById("loader"),
            assetCard: document.getElementById("assetCard"),
            assetName: document.getElementById("assetName"),
            assetTickerLabel: document.getElementById("assetTickerLabel"),
            assetReturn: document.getElementById("assetReturn"),
            assetDesc: document.getElementById("assetDesc"),
            statInvested: document.getElementById("statInvested"),
            statProfit: document.getElementById("statProfit"),
            statTotal: document.getElementById("statTotal"),
            statTotalLabel: document.getElementById("statTotalLabel"),
            statTotalContainer: document.getElementById("statTotalContainer"),
            playbackStatus: document.getElementById("playbackStatus"),
            themeToggle: document.getElementById("themeToggle"),
            chartPlaceholder: document.getElementById("chart-placeholder"),
        };

        const formatters = {
            USD: new Intl.NumberFormat("en-US", {
                style: "currency",
                currency: "USD",
                maximumFractionDigits: 0,
            }),
            IDR: new Intl.NumberFormat("id-ID", {
                style: "currency",
                currency: "IDR",
                maximumFractionDigits: 0,
            }),
            EUR: new Intl.NumberFormat("de-DE", {
                style: "currency",
                currency: "EUR",
                maximumFractionDigits: 0,
            }),
        };

        const inputFormatters = {
            USD: new Intl.NumberFormat("en-US", { maximumFractionDigits: 0 }),
            IDR: new Intl.NumberFormat("id-ID", { maximumFractionDigits: 0 }),
            EUR: new Intl.NumberFormat("de-DE", { maximumFractionDigits: 0 }),
        };

        function money(val) {
            return formatters[el.currency.value].format(val);
        }

        function formatNumberForInput(val) {
            let cleanVal = val.replace(/[^\d,.]/g, "");
            const selectedCurrency = el.currency.value;
            if (selectedCurrency === "IDR" || selectedCurrency === "EUR") {
                cleanVal = cleanVal.replace(/\./g, "").replace(/,/g, ".");
            } else {
                cleanVal = cleanVal.replace(/,/g, "");
            }
            const num = parseFloat(cleanVal) || 0;
            return inputFormatters[el.currency.value].format(num);
        }

        function updateInputValues() {
            const initialCapitalEl = document.getElementById("initialCapital");
            const topupAmountEl = document.getElementById("topupAmount");
            let initialCapitalRaw = initialCapitalEl.value.replace(/[^\d,.]/g, "");
            let topupAmountRaw = topupAmountEl.value.replace(/[^\d,.]/g, "");
            const selectedCurrency = el.currency.value;
            if (selectedCurrency === "IDR" || selectedCurrency === "EUR") {
                initialCapitalRaw = initialCapitalRaw
                    .replace(/\./g, "")
                    .replace(/,/g, ".");
                topupAmountRaw = topupAmountRaw.replace(/\./g, "").replace(/,/g, ".");
            } else {
                initialCapitalRaw = initialCapitalRaw.replace(/,/g, "");
                topupAmountRaw = topupAmountRaw.replace(/,/g, "");
            }
            initialCapitalEl.value = formatNumberForInput(initialCapitalRaw);
            topupAmountEl.value = formatNumberForInput(topupAmountRaw);
        }

        // --- LOGIKA DARK MODE ---
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.classList.toggle("dark");
            localStorage.setItem("theme", isDark ? "dark" : "light");

            if (currentSimulationData) {
                renderUI(currentSimulationData.history); // Rerender full chart
            }
        }

        // Load theme on startup
        if (
            localStorage.getItem("theme") === "dark" ||
            (!("theme" in localStorage) &&
                window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
            document.documentElement.classList.add("dark");
        }

        el.themeToggle.addEventListener("click", toggleTheme);

        el.currency.addEventListener("change", () => updateInputValues());

        document
            .getElementById("initialCapital")
            .addEventListener("input", (e) => {
                const value = e.target.value.replace(/[^\d.]/g, "");
                e.target.value = formatNumberForInput(value);
            });

        document.getElementById("topupAmount").addEventListener("input", (e) => {
            const value = e.target.value.replace(/[^\d.]/g, "");
            e.target.value = formatNumberForInput(value);
        });

        document.addEventListener("DOMContentLoaded", () => {
            updateInputValues();
            loadTickers();

            // Set Default Max Year to current year - 1
            const currentYear = new Date().getFullYear();
            el.startYear.max = currentYear;
        });

        el.duration.addEventListener("input", (e) => {
            el.durationDisplay.textContent = `${e.target.value} Tahun`;
        });

        async function runSimulation() {
            if (isAnimating) {
                stopAnimation();
                return;
            }

            el.loader.classList.remove("hidden");

            let icText = document.getElementById("initialCapital").value;
            let tuText = document.getElementById("topupAmount").value;
            const selCur = el.currency.value;

            if (selCur === "IDR" || selCur === "EUR") {
                icText = icText.replace(/\./g, "").replace(/,/g, ".");
                tuText = tuText.replace(/\./g, "").replace(/,/g, ".");
            } else {
                icText = icText.replace(/,/g, "");
                tuText = tuText.replace(/,/g, "");
            }

            const ic = parseFloat(icText) || 0;
            const tu = parseFloat(tuText) || 0;
            const dur = parseInt(el.duration.value);
            const startYr = parseInt(el.startYear.value);

            const payload = {
                ticker: document.getElementById("assetTicker").value,
                initialCapital: ic,
                topupAmount: tu,
                startYear: startYr,
                duration: dur,
                interval: parseInt(document.getElementById("interval").value),
            };

            try {
                const response = await fetch(`${BACKEND_URL}/api/time-machine`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload),
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error);

                currentSimulationData = data;
                el.loader.classList.add("hidden");
                startAnimation(data);
            } catch (err) {
                el.loader.classList.add("hidden");
                alert(err.message); // Simple alert for error
                console.error(err);
            }
        }

        function startAnimation(data) {
            isAnimating = true;
            el.chartPlaceholder.classList.add("hidden");
            el.btnText.textContent = "Hentikan Waktu";
            el.simulateBtn.classList.replace("bg-purple-600", "bg-red-600");
            el.playbackStatus.classList.remove("hidden");

            el.assetCard.classList.remove("hidden");
            el.assetName.textContent = data.asset.name;
            el.assetTickerLabel.textContent =
                document.getElementById("assetTicker").value;
            el.assetReturn.textContent = `${data.asset.return_pct}%`;
            el.assetDesc.textContent = data.asset.desc;

            let step = 0;
            const target = data.history.length - 1;
            // Faster animation for time machine generally
            const durationPerStep = 10;

            animationInterval = setInterval(() => {
                if (step <= target) {
                    renderUI(data.history.slice(0, step + 1));
                    step++;
                } else {
                    stopAnimation();
                }
            }, durationPerStep);
        }

        function stopAnimation() {
            isAnimating = false;
            clearInterval(animationInterval);
            el.btnText.textContent = "Jalankan Time Machine";
            el.simulateBtn.classList.replace("bg-red-600", "bg-purple-600");
            el.playbackStatus.classList.add("hidden");
        }

        function renderUI(currentHistory) {
            const latest = currentHistory[currentHistory.length - 1];
            const isDark = document.documentElement.classList.contains("dark");
            const gridColor = isDark ? "rgba(255, 255, 255, 0.1)" : "#f1f5f9";
            const textColor = isDark ? "#94a3b8" : "#64748b";

            const profit = latest.balance - latest.invested;
            el.statInvested.textContent = money(latest.invested);
            el.statProfit.textContent = money(profit);
            el.statTotal.textContent = money(latest.balance);

            if (profit >= 0) {
                el.statTotalContainer.style.borderColor = "#10b981";
                el.statTotalLabel.style.color = "#10b981";
                el.statTotalLabel.textContent = "Nilai Akhir (Untung)";
                el.statTotal.style.color = "#10b981";
            } else {
                el.statTotalContainer.style.borderColor = "#ef4444";
                el.statTotalLabel.style.color = "#ef4444";
                el.statTotalLabel.textContent = "Nilai Akhir (Rugi)";
                el.statTotal.style.color = "#ef4444";
            }

            const ctx = document.getElementById("growthChart").getContext("2d");
            const labels = currentHistory.map((d) => d.date);

            if (chartInstance) chartInstance.destroy();

            // Warna dinamis untuk garis dan fill chart
            const chartColor = profit >= 0 ? "#a855f7" : "#ef4444"; // Purple vs Red
            const chartBg =
                profit >= 0
                    ? isDark
                        ? "rgba(168, 85, 247, 0.1)"
                        : "rgba(168, 85, 247, 0.05)"
                    : isDark
                        ? "rgba(239, 68, 68, 0.1)"
                        : "rgba(239, 68, 68, 0.05)";

            chartInstance = new Chart(ctx, {
                type: "line",
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: "Nilai Portfolio",
                            data: currentHistory.map((d) => d.balance),
                            borderColor: chartColor,
                            borderWidth: 3,
                            backgroundColor: chartBg,
                            fill: true,
                            pointRadius: 0,
                            tension: 0.1,
                        },
                        {
                            label: "Modal Diinvestasikan",
                            data: currentHistory.map((d) => d.invested),
                            borderColor: isDark ? "#475569" : "#cbd5e1",
                            borderWidth: 2,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0,
                            tension: 0,
                        },
                    ],
                },
                options: {
                    animation: false,
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: gridColor },
                            ticks: { callback: (v) => money(v), color: textColor },
                        },
                        x: {
                            grid: { display: false },
                            ticks: {
                                color: textColor,
                                maxTicksLimit: 8,
                                maxRotation: 0
                            },
                        },
                    },
                },
            });
        }

        async function loadTickers() {
            try {
                const response = await fetch(`${BACKEND_URL}/api/tickers`);
                const data = await response.json();
                if (data.tickers) {
                    const datalist = document.getElementById("tickerList");
                    datalist.innerHTML = "";
                    data.tickers.forEach((t) => {
                        const opt = document.createElement("option");
                        opt.value = t.symbol;
                        opt.textContent = `${t.name} (${t.symbol})`;
                        datalist.appendChild(opt);
                    });
                }
            } catch (error) {
                console.error("Error loading tickers:", error);
            }
        }

        el.simulateBtn.addEventListener("click", runSimulation);
    </script>
</body>

</html>